INTSourceChangelist:2664732
Availability:Public
Title:スケルタル制御
Crumbs: %ROOT%, Engine, Engine/Animation, Engine/Animation/NodeReference
Description:ターゲットスケルトンのボーンの直接操作とソルバを適用するアニメーション ノード
バージョン：4.9

[REGION:banner]
![Skeletal Control](skelcontrol_banner.png)(convert:false)
[/REGION]

[EXCERPT:Intro]
**SkeletalControls** (SkelControls とも呼ばれます) を使用すると、スケルトン内のボーンを直接制御することができます。個々のボーンの制御、IK チェーンの作成などのために 
Animation ブループリント内で使用します。下層スケルトンを直接制御することで、 
プロシージャルで動的に動くアニメーションを作成することができます。あるボーンの変形を別のボーンを動かすために使用したり、 
通常の歩くアニメーションの再生中に、キャラクターの足と地面を同調させるための 
トレースとして使用します。AnimationSequences で適用したボーン変形の微調整や 
ボーンを完全にオーバーライドするために、どのような種類の修正でも使用できます。
[/EXCERPT:Intro]

## コンポーネント空間

[INCLUDE:Engine/Animation/NodeReference/SpaceConversion#intro]

SpaceConversion (空間変換) ノードに関する詳細は、[](Engine/Animation/NodeReference/SpaceConversion) をご覧ください。

## 共通のピンとプロパティ

全 SkeletalControls に共通のピンとプロパティがいくつかあります。以下に説明します。

| ピン | 説明 |
| --- | ----------- |
| [REGION:tablesection]**入力ピン**[/REGION] ||
| **Component Pose** | 変形させる入力ポーズ |
| **Alpha** | SkeletalControl で適用した変形の重みづけを決定するためのアルファ値として使用する [0.0, 1.0] 範囲の浮動小数点値です。0.0 の値は入力ポーズに最大限の重み付けをし、1.0 の値は制御の計算をした変形に対し最大限の重みづけをします。|
| [REGION:tablesection]**出力ピン**[/REGION] ||
| ポーズ（ブランク） | 変形適用後の最終ポーズ |

## 回転の割合の適用

**Apply a Percentage of Rotation** 制御は、スケルトン内の別のボーンの指定された割合の回転で、 
ターゲットボーンを回転させます。

![Apply Percentage of Rotation](node_applypercent.png)

| プロパティ | 説明 |
| -------- | ----------- |
| [REGION:tablesection]**Multiplier**[/REGION] ||
| **Target Bone** | 制御するターゲット ボーンの名前です。修正をするメインのボーン チェーンです。 |
| **Source Bone** | そこから変形データを受け取るソースボーンの名前です。 |
| **Rotation Axis To Refer** | 「回転」を制御する軸 (X, Y, Z) です。|

| ピン | 説明 |
| --- | ----------- |
| [REGION:tablesection]**入力ピン**[/REGION] ||
| **Multiplier** | ターゲットボーンに適用するソースボーンの回転の割合を表す浮動小数点値です。 [INCLUDE:#Multiplier] |

<!--
[EXCERPT:Multiplier]
[REGION:simpletable]
| 値 | 効果 |
| ----- | ------ |
| 0.0 | ソース ボーンの回転データはターゲット ボーンに適用されません。 |
| 1.0 | ソース ボーンのすべての回転データがターゲット ボーンに適用されます。 |
[/REGION] 
[/EXCERPT:Multiplier]
-->

## Copy Bone

**Copy Bone** 制御は、変形データまたはそのコンポーネントがあればコピーします。例えばあるボーンから別のボーンへ 
平行移動、回転、またはスケーリングのデータをコピーします。

![Apply Percentage of Rotation](node_copybone.png)

| プロパティ | 説明 |
| -------- | ----------- |
| [REGION:tablesection]**コピー**[/REGION] ||
| **Target Bone** | 変形データをコピーするターゲット ボーンの名前です。| 
| **Source Bone** | そこから変形データを受け取るソースボーンの名前です。 |

| ピン | 説明 |
| --- | ----------- |
| [REGION:tablesection]**入力ピン**[/REGION] ||
| **Copy Translation** | ソースボーンの変形データのTranslation (平行移動) コンポーネントをコピーするか否かを指定する bool 値です。 |
| **Copy Rotation** | ソースボーンの変形データの Rotation (回転) コンポーネントをコピーするか否かを指定する bool 値です。 |
| **Copy Scale** | ソースボーンの変形データの Scale (スケーリング) コンポーネントをコピーするか否かを指定する bool 値です。 |

## ボーンの変形 (修正) 

![Apply Percentage of Rotation](node_modifybone.png)

| プロパティ | 説明 |
| -------- | ----------- |
| [REGION:tablesection]**スケルタル制御**[/REGION] ||
| **Bone To Modify** | 変形データを修正するターゲット ボーンの名前です。 |

| ピン | 説明 |
| --- | ----------- |
| [REGION:tablesection]**入力ピン**[/REGION] ||
| **Translation** | ターゲット ボーンに適用する平行移動データを指定するベクター値です。 |
| **Rotation** | ターゲット ボーンに適用する回転データを指定する Rotator (ローテータ) です。 |
| **Scale** | ターゲット ボーンに適用する「スケーリング データを指定するベクター値です。 |

## スプリング コントローラー

**スプリング コントローラー** は、ボーンが参照ポーズ位置から伸縮できる距離の制限や、 
反対方向へ力を加えるスプリング ソルバを適用します。

![Apply Percentage of Rotation](node_springcontroller.png)

| プロパティ | 説明 |
| -------- | ----------- |
| [REGION:tablesection]**Spring**[/REGION] ||
| **Spring Bone** | スプリング ソルバを適用するボーンの名前です。 |
| **Limit Displacement** | 有効時は、スプリングソルバが適用されます。|
| **Max Displacement** | ボーンが伸縮できる最大距離です。 |
| **Spring Stiffness** | スプリングで適用する力の量の乗数です。値が大きくなると、ボーンを変位させるために高いボーンのべロシティ (速度) を必要とし、最終的により大きな力を適用することになります。 |
| **Spring Damping** | スプリングで取り除いたボーンのベロシティの量です。 |
| **Error Reset Thresh** | 変位の閾値。スプリングがこの値以上に伸縮した場合、アクタのテレポートなど突然発生する大きな変位を避けるためにリセットします。 |
| **No ZSpring** | 有効になると、Z 軸の変位は無視されて、常に正しくなります。|

## Two Bone IK

**[Two Bone IK]** 制御は、キャラクターの手足など 3 ジョイントのチェーンにインバースキネマティクス (IK) ソルバを適用します

![Apply Percentage of Rotation](node_twobone.png)

| プロパティ | 説明 |
| -------- | ----------- |
| [REGION:tablesection]**IK**[/REGION] ||
| **IK Bone** | IK ソルバを適用するボーンの名前です。これはボーンチェーンの最終ボーンになります。例えば、足首や手首のボーンです。 |
| [REGION:tablesection]**伸縮制限 **[/REGION] ||
| **X** | 手足の最大強度 (Max Limb Length) の比率。ボーンをいつスケーリングするかを設定する場合に使用します。 |
| **Y** | Translation コンポーネントの最大スケーリング許容量。 |
| **Allow Stretching** | true の場合、ボーンは伸縮可能になります。 |
| [REGION:tablesection]**エンド エフェクタ**[/REGION] ||
| **Effector Space Bone Name** | Effector Location Space が BCS_BoneSpace に設定されると、エフェクタの位置として使用するボーンの名前です。 |
| **Take Rotation from Effector Space** | 有効になると、エフェクタ (コンポーネント、親、またはボーン) の回転は IK Bone へ適用されます。 |
| **Maintain Effector Rel Rot** | 有効になると、IK Bone はエフェクタに対して相対的な回転を維持します。 [REGION:note]この設定は [Take Rotation from Effector Space] が有効になるとオーバーライドされます。[/REGION] |
| **Effector Location Space** | Effector Location の参照フレームです。 [INCLUDE:#LocationSpace] |
| [REGION:tablesection]**Join Target**[/REGION] ||
| **Joint Target Location Space** | Joint Target Location の参照フレームです。 [INCLUDE:#LocationSpace] |
| **Joint Target Space Bone Name** | Joint Target Location Space が BCS_BoneSpace に設定された時、ジョイントのターゲット位置として使用するボーンの名前です。 |

<!--
[EXCERPT:LocationSpace]
[REGION:simpletable]
| 値 | 効果 |
| ----- | ------ |
| **BCS_WorldSpace** | 位置はワールド空間に対して相対的であるとみなされます。 |
| **BCS_ComponentSpace** | 位置は SkeletalMeshComponent に対して相対的であるとみなされます。|
| **BCS_ParentSpace** | 位置は親ボーンに対して相対的であるとみなされます。 |
| **BCS_BoneSpace** | 位置は任意のボーンに対して相対的であるとみなされます (別プロパティの値として名前で指定) 。 |
[/REGION] 
[/EXCERPT:LocationSpace]
-->

| ピン | 説明 |
| --- | ----------- |
| [REGION:tablesection]**入力ピン**[/REGION] ||
| **Effector Location** | Effector Location Space でエフェクタの位置を指定するベクター値です。 |
| **Joint Target Location** | Joint Target Location Space でジョイント ターゲットの位置を指定するベクター 値です。 |
