INTSourceChangelist:2892844
Availability:Public
Title:シーケンサーの概要
Crumbs: %ROOT%, Engine
Description:シーケンサーは UE4 のマルチ トラック エディタです。シネマティック シーケンスをリアルタイムで作成し、プレビューするために使用します。 
Navigation:topic
parent:Engine/Sequencer
order:1
Version:4.11
Related:Engine\Sequencer\ReferenceEditor
Related:Engine\Sequencer\HowTo


[REGION:warning]
これは現在開発中の機能であり、期待どおりに機能しなかったり、将来のリビジョンで変更される可能性があります。
[/REGION]

**Sequencer (シーケンサー)** エディタには、 [**マチネ**](Engine\Matinee\) に似た特殊なマルチ トラック エディタを通してインゲームのシネマティックスを作成する機能があります。 
**レベル シーケンス** を作成し **トラック** を追加することで、各トラックの構成を定義し、それによりシーンの内容を決めることができます。
トラックには、アニメーション (キャラクターをアニメートするため)、トランスフォーム (カメラなどをシーン内で動かす) 、オーディオ (音楽やサウンド エフェクトを含むため)、およびその他数種類があります。  

このページでは、UE4 内のシーケンス エディタの基本について説明します。 

[TOC(start:2 end:2)]

[REGION:note]
シーケンサーで作業するためには、有効にする必要があります。詳細は、[](Engine\Sequencer\HowTo\EnableSequencer) をご覧ください。 
[/REGION]

## レベル シーケンスを作成する

**レベル シーケンス** はシネマティックス シーン用の「コンテナ」であり、シーケンス エディタ内で作業を開始するために作成しなければならないものです。レベル シーケンスを作成してレベル内に直接配置することができます。これを行うには、**ツールバー** の **シネマティックス** から作成することを選択します。 

![](LevelSequence.png)

これでレベルにレベル シーケンスが追加されます。その場所で選択可能になり、そのプロパティは **Matinee アクタ** 同様に、**[Details (詳細)]** パネルから操作することができます。[Details] パネルで (以下)、レベル シーケンスがレベル開始時に自動的にプレイするか、シーケンスのプレイ速度、シーケンスがループするか、およびその他の設定を定義することができます。 

![](DetailsPanel.png)

マチネとの違いですが、レベル シーケンスは自己完結型の独立した情報であり、あるレベル シーケンスを別のレベル シーケンスに埋め込むことができます。 
例えば、アニメートしたキャラクターを持ち、さらに大きなシネマティックスの一部であるひとつのシーンとしてカメラカットを持つレベル シーケンスを作成することができます。 

次に別のレベル シーケンスを作成することができます。これは個々のレベル シーケンス (または作成したシーン) をすべて含むマスター シーケンスになります。マスター シーケンスでは、オーディオ トラックを追加して全体のスコアを作成したり、並べ替えて個々のレベル シーケンスを動かして最終的なシネマティック シーケンスを作ることができます。 

ここでレベル シーケンスを作成する 2 番目の方法が役立ちます。これは、**コンテンツ ブラウザ** の **[Add New] ** ボタンの **[Animation]** から行うことができます。この方法で行うと、Level Sequence アセットを作成していますが、レベルには明確に配置していません。 

![](LevelSequence_B.png)


## シーケンサーにトラックを追加する

レベル シーケンスが作成され、シーケンス エディタが開いた状態で、シネマティックスの作成を開始することができます。 

![](BlankScene.png)

[REGION:caption]
上の画面では、新規作成した何も入っていないレベル シーケンスがあります。
[/REGION]

最初に、**Track** の種類を追加する必要があります。これは、**[Add]** ボタンのドロップダウン メニューから行うことができます。 

![](AddToSequencer.png)

ドロップダウンに選択対象のトラックが数種類と、**Actor To Sequencer (アクタをシーケンサーに追加する)** 機能も表示されます。この [Actor To Sequencer] オプションではレベルで選択したアクタをシーケンサーに追加して、シーン中に操作できるようにすることができます。 

通常、こうしたラインに沿ってアニメートし、動くキャラクター、動物、クリーチャーなどを持つシネマティックスを作成している場合、スケルタルメッシュを持ちますが、これをシーケンサーに追加する必要があります。 
例えば、以下ではレベルに配置したクマのスケルタルメッシュがあります。それを選択した状態で、次にシーケンサーの **[Add]** ボタンをクリックし、それを追加し、 **[Actor To Sequencer]** を選択し、それを追加し、シーケンサー エディタで制御できるようにします。

![](AddBear.png)(w:640)

スケルタルメッシュを追加したら、次に **サブトラック** を追加してスケルタルメッシュに影響を与えることができます。 

![](SkeletalMeshTracks.png)

[REGION:caption]
作成するトラックの種類に基づき、サブトラックを追加することが可能であり、サブトラック追加機能が利用できます。 
[/REGION]

以下では、アニメーションのサブトラックを選択し、スケルタルメッシュのクマにアニメーションを割り当てプレイするようにします。 

[OBJECT:EmbeddedVideo]
[PARAMLITERAL:width]
640
[/PARAMLITERAL]
[PARAMLITERAL:height]
360
[/PARAMLITERAL]
[PARAMLITERAL:videoid]
yCqXhA3UYeM
[/PARAMLITERAL]
[/OBJECT]

さらに多くのトラックを追加することで、このシーンの修正を続けることができます。例えば、このアイドル アニメーションを複数のカメラ アングルから撮影するとします。必要なカメラをレベルに追加し、それらをシーケンサーに追加します。追加したら、次に Camera Cuts トラックを追加して、以下のようにカメラ間で切り替えるようにします。 

[OBJECT:EmbeddedVideo]
[PARAMLITERAL:width]
640
[/PARAMLITERAL]
[PARAMLITERAL:height]
360
[/PARAMLITERAL]
[PARAMLITERAL:videoid]
NeChZY18tpY
[/PARAMLITERAL]
[/OBJECT]


[REGION:note]
シーケンサーでカメラを使うための詳しい情報は、[](Engine\Sequencer\HowTo\TracksCameraCut) をご覧ください。
[/REGION]


## シーンのキーフレーム化

外部のアニメーション ツールを使い慣れている場合、キーフレームを使ってコンテンツを操作する考え方に慣れ親しんでいるかもしれません。 
そうでない場合、簡単に説明するとシーケンサーでは、タイムラインに沿った必要なポイントにプロパティを定義した **キー** を追加して(キーフレーム化といいます) コンテンツを操作することができます。 
タイムラインでこうしたキーに到達すると、各キーフレームで定義したプロパティが、入力した値を反映するように更新されます。

前のクマのシーンから引き続き、キーフレームを通して配置したカメラに移動を加えてこのプロセスを視覚化できます。 

[OBJECT:EmbeddedVideo]
[PARAMLITERAL:width]
640
[/PARAMLITERAL]
[PARAMLITERAL:height]
360
[/PARAMLITERAL]
[PARAMLITERAL:videoid]
4Nim4vwT4v8
[/PARAMLITERAL]
[/OBJECT]

[REGION:caption]
上記では、トラックを選択した状態で **Enter** を押して Location Transform にキーフレームを追加しました。 
[/REGION]

[REGION:tip]
キーフレームを含むトラックを選択した状態で、**<** キーと **>** キーを押して配置した各キーフレーム間を迅速に移動することができます。 
[/REGION]


### 再生範囲

シーケンサーでは、定義されたスタートとストップの再生範囲に基づきシーンを再生します (緑/赤のマーカー)。 

![](PlaybackRange.png)

[REGION:caption]
上の図では、このコンテンツは 150 フレームの間だけ持続しますが、このシーンは 200 フレームまで拡張するように設定されており、使われていない部分が一部残ってしまいます。 
[/REGION]

Start Playback (再生開始) および Stop Playback (再生終了) のマーカーをドラッグして、コンテンツがうまく入るようにするか、コンテンツをこうした範囲内に入るように保つオプションがあります。このオプションはシーケンサー オプションのドロップダウン メニューにあり、**Keep Playback Range In Section Bounds (再生範囲をセクションの境界内に保持する)** を有効にします。 

![](KeepInRange.png)

## 特殊なビューポート

シーケンサーでは特殊なビューポートを使って編集プロセスを簡単にすることができます。 

![](SpecialViewports.png)

こうしたビューポートでは、最終的なシーンがどのようになるか把握しやすくなります。**ビューポート** のオプションボタンから [有効にする](Engine\Sequencer\HowTo\ViewportOptions) ことができます。 


##所有可能なものとスポーン可能なもの

シーケンサーは "possessables (所有可能なもの)" という概念を用いる点でマチネと非常によく似ています。つまり、アクタがレベルに存在し、シーケンサーがそれを所有し、シーケンサーを介して加えた変更を適用します。 

上のクマの例で示したように、レベルにスケルタルメッシュを配置し、それをシーケンサーに追加し、次にシーケンサー内でアニメーション トラックをスケルタルメッシュに追加し、様々なアニメーションを割り当ててシーン中にプレイすることができます。 
この存在するスケルタルメッシュを所有し、何をするかを指示できるようにします。シーケンサーには、"spawnables (スポーン可能なもの)" という別の操作形態もあります。つまり、所有しているオブジェクトが存在せず、指示されて、それに対する権限を持つ場合にシーケンサーがそのオブジェクトをスポーンし、そのライフサイクルを決めます。 

これはどのようなメリットがあり、どのようなときに "spawnable" オブジェクトを使うのでしょうか？ シーケンサーはオーナーであり、オブジェクトをスポーンするため、特定レベルに制限されません。スポーン可能なものとみなされるものはどのレベルでも使用可能です。そのため、シーンを作成し、それをどの環境でも起こるようにし、再作成する必要なく新しいレベルで再利用できます。 

[REGION:note]
詳細は、 [](Engine\Sequencer\HowTo\Spawnables\) をご覧ください。 
[/REGION]


##Movie 設定のレンダリング

シーケンサー内で **[Render Movie Settings]** オプションからシネマティックスを Video または Image Sequence にムービー出力することができます。 

![](RenderMovie.png)

**[Render Movie Settings]** ウィンドウが表示されます。これを使ってシーンをどのようにレンダリングするかを定義できます。 

![](CaptureMovie.png)

シーンの録画のキャプチャ プロセスを開始するには、**[Capture Movie]** ボタンをクリックします。 


## ワークフロー上の考慮事項

チームの構成に応じて、シーケンサーで作業する場合に以下のワークフローを検討してみてください。 

[REGION:note]
これらは単に提案であり、それぞれの状況に応じて最適なものが何であるかをご自由にお試しください。 
[/REGION]

### リニア ワークフロー

このワークフローでは、ひとつのレベル シーケンスを使い、そのシネマティックスに対するすべてのコンテンツがその中で作成されます。このタイプのワークフローは、独自のプロジェクトで作業している個人で、シネマティックスで他の人と協力する必要がない場合に最適です。 

* レベル シーケンスは、シネマティックスに入るすべてのキャラクター、アニメーション、ライト、その他のオブジェクトを含んで作成されます。
* シネマティックスの各シーンは、そのコンテンツでセットアップされます。アニメーション、移動、ライトなどはすべて定義されます。 
* シネマティックスのコンテンツをセットアップした状態で、カメラが各シーンを撮影する位置に移動します。 
* カメラ カットは、**Camera Cuts** トラックで指定し、シーケンスを最終的なシネマティックスに形作ります。 
* オーディオをレベル シーケンスに加えて、仕上げを加えます。 


### ノンリニア ワークフロー

ノンリニア ワークフローでは、コンテンツは複数のレベル シーケンスに分けられて、それらは別の「マスター」レベル シーケンスに加えられます。 
各シーンは独自のレベル シーケンスに分割されるため、必要に応じてどのシーケンスでも作業して、マスター レベル シーケンスでショットの順序を並べ変えることができます。 

* シネマティックスの各シーンに対してレベル シーケンスを作成し、すべてのシーンをまとめるためにマスター レベル シーケンスが作成されます。 
* 各シーンはそのコンテンツでセットアップされます (カメラは考慮せずコンテンツだけを考えます)。キャラクター、アニメーション、移動はすべて追加されます。 
* 各レベル シーケンスがマスター レベル シーケンスに追加されます。マスター レベル シーケンスでは、Lead (リード) が各シーンのカメラワークを作成し、セットアップします。 
* Lead はマスター レベルから他のエフェクト、オーディオ、その他の仕上げも加えることができます。すべてのコンテンツを追加する必要はありません。 

その他の検討事項： 

* それ自体がレベル シーケンスである各シーンにはカメラが割り当てられ、代わりにシーンの中でカメラ ワークがセットアップされます。
	* そのシーンがマスター レベル シーケンスに追加されると、カメラワークを行う必要はありません。
	* そのシーンがマスター レベル シーケンス中にプレイされる場合、シーン内のカメラ ワークが使用されます。 
	* これにより、独自のミニ シーケンスとして各シーンをセットアップ可能であり、マスター レベル シーケンスでまとめることができます。 
	* Lead は最終的なシネマティックスを作るために各シーンをアレンジし、必要があれば各シーンにジャンプして変更を加えます。 
* **Shots** トラックで **Takes (テイク)** を使ってマスター レベル シーケンス内で各シーンに変化を加えることができます。 
	* これにより、レベル シーケンスの複製を作り、オリジナルの代わりにその"take" (テイク) を修正することができます。 

[REGION:note]
この例として、[](Engine\Sequencer\HowTo\TracksShot) のページをご覧ください。 
[/REGION]



### コラボレーション ワークフロー

コラボレーション ワークフローでは、ノンリニア ワークフローのコンセプトを用いますが、人々が他の人の作業に影響を与えずに同じシーンで同時に作業できる機能も加えます。 
**Subscenes** トラックで、各シーンの各部分についてレベル シーケンスを作成し、それらをオーバーラップさせて、あるショット上で複数の人が同時に作業できるようにします。これは、映画で使われている従来の手法です。  

以下のようになります。

* マスター シーケンス
	* Shot 1 (レベル シーケンス)
		* Shot 1 Lighting (サブシーン トラック上のレベル シーケンス)
		* Shot 1 Camera (サブシーン トラック上のレベル シーケンス)
		* Shot 1 Skeletal Animation (サブシーン トラック上のレベル シーケンス)
		* Shot 1 FX (サブシーン トラック上のレベル シーケンス)

ショットの各部分は、その独自のレベル シーケンスになり、互いに合成されると最終ショットになります。 

[REGION:note]
この例として、[](Engine\Sequencer\HowTo\TracksSub) のページをご覧ください。 
[/REGION]


