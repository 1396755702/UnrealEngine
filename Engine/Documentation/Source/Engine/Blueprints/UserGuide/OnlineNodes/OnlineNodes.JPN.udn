INTSourceChangelist:2422946
Availability:Public
Title:Online Session ノード
Crumbs: %ROOT%, Engine, Engine/Blueprints, Engine/Blueprints/UserGuide
Description:様々な種類のオンライン Blueprint ノードおよびエラー関連 Blueprint ノードの説明
Related:Engine/Blueprints
Related:Programming/Online
Related:Gameplay/Networking/Replication
Related:Resources/ContentExamples/Networking


[VAR:Topic]
[OBJECT:Topic]
	[PARAM:image]
		![%Engine\Blueprints\UserGuide\OnlineNodes:title%](Engine\Blueprints\UserGuide\OnlineNodesTopic.png)
	[/PARAM]
	[PARAM:icon]
	[/PARAM]
	[PARAM:title]
		%Engine\Blueprints\UserGuide\OnlineNodes:title%
	[/PARAM]
	[PARAM:description]
		%Engine\Blueprints\UserGuide\OnlineNodes:description%
	[/PARAM]
	[PARAM:path]
		[RELATIVE:Engine\Blueprints\UserGuide\OnlineNodes]
	[/PARAM]
[/OBJECT]
[/VAR]

[VAR:TopicCompact]
[OBJECT:TopicCompact]
	[PARAM:image]
		![%Engine\Blueprints\UserGuide\OnlineNodes:title%](Engine\Blueprints\UserGuide\OnlineNodesTopic.png)
	[/PARAM]
	[PARAM:icon]
	[/PARAM]
	[PARAM:title]
		%Engine\Blueprints\UserGuide\OnlineNodes:title%
	[/PARAM]
	[PARAM:description]
		%Engine\Blueprints\UserGuide\OnlineNodes:description%
	[/PARAM]
	[PARAM:path]
		[RELATIVE:Engine\Blueprints\UserGuide\OnlineNodes]
	[/PARAM]
[/OBJECT]
[/VAR]



[TOC (start:2 end:2)]

[EXCERPT:OnlineNodes]

## Online Session ノード

以下のノードは、 **Blueprints** によるマルチプレイヤー ゲームのホスト、検索、参加、退出に関与します。 

それぞれのノード操作は _レイテンシ_ 、つまりバックグラウンドで操作を行い (多くの場合、ネットワーク上での通信が必要な操作であるため)、その後どこかで終了します。ノードの右上端の時計アイコンで表示されます。

### Create Session

![](CreateSession.png)

**Create Session** ノードからすべてが開始します。ゲームが正常にセッションを作成したら、ゲームの他のインスタンスが (**Find Session** ノードで) 検索、および (**Join Session** ノードで) 参加ができるようになります。このノード上で、セッションに参加できるプレイヤー数とセッションを LAN モードで作成するかどうかを指定できます。サポートされているオンライン サブシステム モジュールの場合、LAN モードを false に設定するとインターネットゲームを作成しようとします。 

[REGION:note]
オンライン サブシステムとセッション インターフェースの概要は、 [](Programming/Online) ページを参照してください。
[/REGION]

### Find Sessions

![](FindSessions.png)

**Find Sessions** ノードを使って、現在宣伝中そして参加可能なゲーム セッションのリストを取得します。正常なコールから返された **BlueprintSessionResult** オブジェクトからサーバーの名前、ping、プレイヤー数を取得することができます。 

### Join Session

![](JoinSession.png)

参加したい **BlueprintSessionResult** を決めたら、 **Join Session** にそれをパスします。ゲームは正常にサーバーに接続されると、自動的にサーバーのマップにつながり、ゲームプレイに参加します。 

### Destroy Session

![](DestroySession.png)

他のプレイヤーのゲームの検索と参加を締め切りたい場合、 **Destroy Session** ノードを呼び出します。これで効率的にセッションから離れることができますし、ゲームをホストしている場合は、セッションを終了するので、これ以上検索されることはありません。 

[REGION:note]
このノードはセッションから退出する際にも使用します。ゲームから退出する時に、クライアントはこのノードを呼び出す必要があります。
[/REGION]

## エラー処理ノード

残念ながら、ネットワーク操作の処理中は、常にエラーが起こる可能性があるので、ゲームはうまくそれらに対処しなければなりません。参加しようとしているセッションのホストが直前にやめてしまう、インターネット サービスが一時的にダウンするなど、発生する可能性のある問題は様々です。ブループリントを使えば、ゲームはこれらのネットワーク関連エラーに臨機応変に対応することができます。 

上記のようなセッション オペレーションが原因のエラーは **OnFailure** 実行ピンにより報告されるので、これらのエラーの処理を思うままにゲームに設定することができます。ただし、ゲームプレイ中に発生するエラーや所定のエラーの場合は、いくつかの Error イベントを **GameInstance** Blueprint、 **Network Error** 、 **Travel Error** 内で呼び出すことができます。 

### Network Error イベント

![](EventNetworkError.png)

**Network Error** イベントは、ゲームがイベントに応答し、エラータイプを表す列挙型変数を受け取り、適切に応答する、例えば、ユーザーにダイアログボックスを表示することができるようにします。 

### Travel Error イベント

![](EventTravelError.png)

**Travel Error** イベントは、 **Network Error** イベントほど一般的ではありませんが、無効なマップのロードの試みなど、 **Network Error** が対応しないケースをゲームが処理できるようにします。 

[/EXCERPT:OnlineNodes]




