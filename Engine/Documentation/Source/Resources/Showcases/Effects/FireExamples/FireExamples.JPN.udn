INTSourceChangelist:2572610
Availability:Public
Title:火の作成事例
Crumbs:%ROOT%, Resources, Resources/Showcases/Effects
Description:UE4 に Particle Effect の一環として同梱されている Fire Effect の概要
Related:Engine/Rendering/ParticleSystems/Reference/TypeData/GPUSprites
Related:Engine/Rendering/ParticleSystems/Reference/Modules/VectorField
Related:Engine/Rendering/ParticleSystems/Optimization

[REGION:fullwidth]
![](title_Fire.png)
[/REGION]

[TOC (start:2)]





以下のパーティクルシステムは紹介例として作成した火のエフェクトです。それぞれのエフェクトがどのように作成されているかを理解するために、これらのエフェクトをカスケードで開くことを推奨します。

カスケードやパーティクルシステムに関する詳細は [パーティクル システムのドキュメント](Engine/Rendering/ParticleSystems) を参照してください。


## たいまつ

![](FireFlame.png)(w:600)

**コンテンツブラウザの位置：** _/Game/Effects/Particles/Fire/P_TorchFire_

この[Particle System](Engine/Rendering/ParticleSystems) は周辺環境を明るくしリアルな炎をシミュレートします。ライトはパーティクルシステム内のLightモジュールを使用して作成します。このモジュールはパーティクルの位置でダイナミックライトをスポーンします。ユーザーはパーティクルの寿命を通じてライトの輝度とカラーおよびライトの半径を制御します。しかしこれらのライトは、現時点ではLit Translucent Materialsに影響を及ぼさないため、レベルで使用している火は標準のlight Actorを付近に使用しています。


![](Particle_Light_Cascade.png)(w:600)

上記の画像はパーティクルライトの半径を表示しています。カスケード内の _Preview Light Radius_ オプションがチェックされると表示されます。

エフェクトにはフレームから放たれて信憑性のある渦状の動作をする一連のスパークパーティクルもあります。この動作はGPU Spriteパーティクルで利用できる _Local Vector Field_ 機能を使用して実現します。ベクターフィールドは流体シミュレーションデータから作成されるベクターの3Dボリュームです。後にGPUパーティクルを動かすために使用します。パーティクルがボリュームを通過すると、それぞれの位置のベクターはベロシティに影響を及ぼします。ベクターフィールドはビューポートの [View] メニューを通じてカスケード表示することができます（ **[View] > [Vector Fields]** ）。

![](VectorFieldVisible.png)

上記の画像は、赤線の大きなキューブ状態のベクターフィールドを表示しています。これは個々のベクターを表します。このエフェクトの場合、 _VF Rotation Rate_ モジュールもベクターフィールドの回転に使用されます。つまりベクターフィールドが乱流動作をパーティクルへ適用しても、フィールド自体が既に移動しているので、非常にランダムで自然な乱れをパーティクルの動きにもたらします。

ベクターフィールドに関する詳細は、[GPU Sprite](Engine/Rendering/ParticleSystems\Reference\TypeData\GPUSprites)  と [Vector Field](Engine/Rendering/ParticleSystems\VectorFields) を参照してください。



## Orb Glow ライト

![](Sparks.png)(w:600)

**コンテンツブラウザの位置：** _/Game/Effects/Particles/Fire/P_OrbGlowLights_

このエフェクトは、フレームエフェクトと一緒に軌道の表面をあちこち移動する幻想的な火花のシミュレーションを作成します。フレームは本質的には上述のTorch Fire（たいまつ）の例と同一です。火花は、ローカルベクターフィールドによって動かされるGPUスプライトパーティクルシステムから、動きをもたらすために構成されます。このベクターフィールドはパーティクルを渦巻き状のパターンで動かします。その後VF Rotation Rateモジュールはベクターフィールドに使用され、複数軸を絶え間なく回転する渦を作成します。回転しているベクターフィールドをパーティクルが移動する時、パーティクルはエフェクトに見られるような渦巻き状のパターンで通過します。




[INCLUDE:Resources\Showcases\Effects#ParticleTopics]